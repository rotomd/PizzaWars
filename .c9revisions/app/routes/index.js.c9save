{"ts":1357410867675,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*\n    routing for index page,\n    page accessed via /\n    todo: after reading some of the express source, i've realized that we don't need to precompile\n    our own server side templates.\n    \n    so get rid of that stupidness.\n*/\n\nvar render = require('../views/server-template-compiler.js').index,\n    Shops = require('../models/shops.js').Shops,\n    People = require('../models/people.js').People,\n    async = require('async');\n\nexports.html = function(req, res){    \n    \n    //need to get the list of shops and the list of participants\n    async.parallel([\n        function(callback){\n            //get the shops\n            Shops.find({}, callback);\n        },\n        function(callback){\n            //get the participants.\n            People.find({}, callback);\n        }\n    ],\n    function(err,results){        \n        var locals;        \n        if(!err){\n            locals = {\n                shops: results[0],\n                participants: results[1]\n            };\n            res.send( render( locals ) );\n        } else {\n            console.log(err);\n        }\n    });\n};"]],"start1":0,"start2":0,"length1":0,"length2":1092}]],"length":1092}
{"contributors":[],"silentsave":false,"ts":1357411127506,"patch":[[{"diffs":[[0,"*/\n\nvar "],[1,"//"],[0,"render ="]],"start1":229,"start2":229,"length1":16,"length2":18},{"diffs":[[0,"        "],[-1,"r"],[1,"//"],[0,"es.send("]],"start1":989,"start2":989,"length1":17,"length2":18},{"diffs":[[0,"ls ) );\n"],[1,"            res.render('index', locals, function(err, html){\n                res.send(html);\n            });\n"],[0,"        "]],"start1":1020,"start2":1020,"length1":16,"length2":125}]],"length":1204,"saved":false}
{"ts":1357411376942,"patch":[[{"diffs":[[0,"a /\n"],[-1,"    todo: after reading some of the express source, i've realized that we don't need to precompile\n    our own server side templates.\n    \n    so get rid of that stupidness.\n*/\n\nvar //render = require('../views/server-template-compiler.js').index,"],[1,"*/\n\nvar "],[0,"\n   "]],"start1":51,"start2":51,"length1":255,"length2":16},{"diffs":[[0,"    "],[-1,"//es.send( render( locals ) );"],[0,"\n   "]],"start1":754,"start2":754,"length1":38,"length2":8}]],"length":935,"saved":false}
