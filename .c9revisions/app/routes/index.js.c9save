{"ts":1357263722587,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*\n    routing for index page,\n    page accessed via /\n    todo: after reading some of the express source, i've realized that we don't need to precompile\n    our own server side templates.\n    \n    so get rid of that stupidness.\n*/\n\nvar render = require('../views/server-template-compiler.js').index,\n    Shops = require('../models/shops.js').Shops,\n    Participants = require('../models/people.js').Participants,\n    async = require('async');\n\nexports.html = function(req, res){    \n    \n    //need to get the list of shops and the list of participants\n    async.parallel([\n        function(callback){\n            //get the shops\n            Shops.find({}, callback);\n        },\n        function(callback){\n            //get the participants.\n            Participants.find({}, callback);\n        }\n    ],\n    function(err,results){\n        var locals;        \n        if(!err){\n            locals = {\n                shops: results[0],\n                participants: results[1]\n            };\n            res.send( render( locals ) );\n        } else {\n            console.log(err);\n        }\n    });\n};"]],"start1":0,"start2":0,"length1":0,"length2":1102}]],"length":1102}
{"contributors":[],"silentsave":false,"ts":1357263709383,"patch":[[{"diffs":[[0,"esults){"],[1,"        "],[0,"\n       "]],"start1":824,"start2":824,"length1":16,"length2":24},{"diffs":[[0,"     };\n"],[1,"            console.log(locals);\n"],[0,"        "]],"start1":993,"start2":993,"length1":16,"length2":49}]],"length":1143,"saved":false}
{"ts":1357263766660,"patch":[[{"diffs":[[0,"s,\n    P"],[-1,"articipants"],[1,"eople"],[0," = requi"]],"start1":347,"start2":347,"length1":27,"length2":21},{"diffs":[[0,"e.js').P"],[-1,"articipants"],[1,"eople"],[0,",\n    as"]],"start1":387,"start2":387,"length1":27,"length2":21},{"diffs":[[0,"       P"],[-1,"articipants"],[1,"eople"],[0,".find({}"]],"start1":737,"start2":737,"length1":27,"length2":21}]],"length":1125,"saved":false}
{"ts":1357263802811,"patch":[[{"diffs":[[0," };\n"],[-1,"            console.log(locals);\n"],[0,"    "]],"start1":979,"start2":979,"length1":41,"length2":8}]],"length":1092,"saved":false}
